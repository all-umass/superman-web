<table class="ds_table nofloat_ds_table aligned_table">
<tr><td class="bold">Predict</td><td>
<select class="target_meta" data-placeholder="select variable(s)" multiple>
{% for key, name in meta_pairs %}
  <option value="{{key}}">{{name}}</option>
{% end %}
</select></td></tr>
<tr><td class="bold">PLS type</td><td>
<select id="pls_kind">
  <option value="pls1" selected>Univariate (PLS-1)</option>
  <option value="pls2">Multivariate (PLS-2)</option>
</select></td></tr>
</table>

<table class="ds_table nofloat_ds_table aligned_table">
<tr><td class="bold">PLS components</td><td>
  {# TODO: convert this to a double-handled slider #}
  <input type="number" id="cv_min_comps" value=6 min=1 max=100> -
  <input type="number" id="cv_max_comps" value=15 min=1 max=100>
</td></tr>
<tr><td class="bold">Cross validation</td><td>
  {# TODO: add other CV strategy (stratified?) #}
  <label><input type="number" id="cv_folds" value=5 min=1 max=100> folds</label>
</td></tr>
<tr><td colspan=2>
  <button disabled class="needs_filter" onclick="run_crossval(this);">
    Select<span class="wait">ing</span> model<span class="wait">...</span>
  </button>
  <div class="err_msg"></div>
</td></tr>
</table>

<table class="ds_table nofloat_ds_table aligned_table">
<tr><td class="bold">Train</td><td>
  <label><input type="number" id="pls_comps" value=6 min=1 max=100>
  components</label>
</td></tr>
<tr><td class="bold">Upload</td><td>
  <input type="file" id="modelfile" />
  <span class="err_msg"></span>
</td></tr>
<tr><td colspan=2>
  <button disabled class="needs_filter" onclick="make_model(this);">
  Train/Upload model<span class="wait">...</span></button>
  <div class="err_msg"></div>
</td></tr></table>

<div class="flow" style="text-align: left;">
{# info: ds_kind, (ds_name), vars, uni/multivariate, n_comps #}
<span>Current Model: <span id="model_info">None</span></span>
<table id="model_error">
  <thead><tr><th>Variable</th><th>RÂ²</th><th>RMSE</th></tr></thead>
  <tbody></tbody>
</table>

<button disabled class="needs_model" onclick="run_preds(this);">
Run<span class="wait">ning</span> predictions<span class="wait">...</span>
</button>
<button disabled class="needs_model" onclick="plot_coefs(this);">
Plot<span class="wait">ting</span> coefficients<span class="wait">...</span>
</button>
<div class="err_msg"></div>
<br>
<button disabled class="needs_model" onclick="predict_download(this);">
Download</button><select style="vertical-align: baseline;">
  <option value="preds">predictions</option>
  <option value="pkl">model (binary file)</option>
  <option value="csv">coefficients (text file)</option>
</select>
</div>
